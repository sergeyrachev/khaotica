MPEG_transport_stream() {
    do {
        transport_packet()
    } while (nextbits() == 0x47)
}

transport_packet(){
     sync_byte                                               8 bslbf
     transport_error_indicator                               1 bslbf
     payload_unit_start_indicator                            1 bslbf
     transport_priority                                      1 bslbf
     PID                                                    13 uimsbf
     transport_scrambling_control                            2 bslbf
     adaptation_field_control                                2 bslbf
     continuity_counter                                      4 uimsbf

    if(adaptation_field_control=='01' || adaptation_field_control=='11') {
        payload()
    }
}

payload(){
    for (i=__position(sync_byte);i<184 + __position(sync_byte) ;i++){
        fakerest  8 uimsbf
    }
}
